<!DOCTYPE html>
<html>
<head>
    <title>Login - Boss Tracker</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body class="login-body">

<div class="login-container">
    <h2>Login</h2>

    <input type="text" id="username" placeholder="Username">
    <input type="password" id="password" placeholder="Password">

    <button class="btn" onclick="login()">Login</button>
    
    <!-- Custom notification -->
    <div id="login-notification" class="login-notification"></div>
</div>



<script>
// global config storage
let CONFIG = null;

// load config.json
fetch("config.json")
    .then(res => res.json())
    .then(data => CONFIG = data)
    .catch(err => {
        console.error("Failed to load config.json", err);
        showNotification("Error loading configuration.", "error");
    });

function showNotification(message, type = "error") {
    const notif = document.getElementById("login-notification");
    notif.textContent = message;
    notif.className = "login-notification " + type;
    notif.style.display = "block";
    
    // Auto-hide after 4 seconds
    setTimeout(() => {
        notif.style.display = "none";
    }, 4000);
}

function login() {
    const user = document.getElementById("username").value.trim();
    const pass = document.getElementById("password").value.trim();

    if (!CONFIG) {
        showNotification("Configuration not loaded yet. Try again.", "error");
        return;
    }

    if (user === CONFIG.username && pass === CONFIG.password) {
        localStorage.setItem("logged_in", "true");
        window.location.href = "dashboard.html";
    } else {
        showNotification("Login failed: Username and password do not match", "error");
    }
}

// Add Enter key listener to password input
document.addEventListener("DOMContentLoaded", function() {
    document.getElementById("password").addEventListener("keypress", function(event) {
        if (event.key === "Enter") {
            login();
        }
    });
    
    document.getElementById("username").addEventListener("keypress", function(event) {
        if (event.key === "Enter") {
            login();
        }
    });
});
</script>



</body>
</html>